<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="Cache-Control"
            content="no-cache, no-store, must-revalidate">
        <meta http-equiv="Pragma" content="no-cache">
        <meta http-equiv="Expires" content="0">
        <title>Family Tree Builder</title>
        <link rel="icon"
            href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%232c5f2d' d='M12 2C8.13 2 5 5.13 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7zm-2 15v-1h4v1h-4zm4-3h-4v-1.5h4V14z'/></svg>">
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container" aria-live="polite"
            aria-atomic="true"></div>

        <!-- Top Navigation Bar -->
        <header class="navbar" role="banner">
            <div class="navbar-content">
                <!-- Brand -->
                <div class="navbar-brand">
                    <svg class="navbar-icon" viewBox="0 0 24 24" width="24"
                        height="24" aria-hidden="true">
                        <path fill="currentColor"
                            d="M12 2C8.13 2 5 5.13 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7zm-2 15v-1h4v1h-4zm4-3h-4v-1.5h4V14z" />
                    </svg>
                    <h1 class="navbar-title">Family Tree</h1>

                    <!-- Project Info Badge -->
                    <div class="project-badge" id="projectBadge">
                        <span class="project-name"
                            id="projectName">Untitled</span>
                        <span class="project-status" id="projectStatus"
                            data-status="saved">
                            <span class="status-dot"></span>
                            <span class="status-text">Saved</span>
                        </span>
                    </div>
                </div>

                <!-- Project Controls (File Operations) -->
                <div class="navbar-project">
                    <button id="newProjectBtn" class="btn-icon"
                        title="New Project (Ctrl+N)" aria-label="New project">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path
                                fill="currentColor"
                                d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z" /></svg>
                    </button>
                    <button id="openProjectBtn" class="btn-icon"
                        title="Open Project (Ctrl+O)" aria-label="Open project">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path
                                fill="currentColor"
                                d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z" /></svg>
                    </button>
                    <button id="saveProjectBtn" class="btn-icon"
                        title="Save (Ctrl+S)" aria-label="Save project">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path
                                fill="currentColor"
                                d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z" /></svg>
                    </button>
                    <button id="saveAsProjectBtn" class="btn-icon"
                        title="Save As (Ctrl+Shift+S)"
                        aria-label="Save project as">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path
                                fill="currentColor"
                                d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z" /><path
                                fill="currentColor"
                                d="M19 19v-2h2v2h-2zm0-4v-2h2v2h-2z"
                                opacity="0.6" /></svg>
                    </button>
                    <div class="separator"></div>
                </div>

                <!-- Auto Arrange Button + Search + Filters -->
                <div class="navbar-center">
                    <button id="autoArrangeBtnToolbar" class="btn-icon"
                        title="Auto Arrange" aria-label="Auto arrange tree">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path
                                fill="currentColor"
                                d="M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z" /></svg>
                    </button>
                    <div class="search-box">
                        <svg class="search-icon" viewBox="0 0 24 24" width="16"
                            height="16" aria-hidden="true">
                            <path fill="currentColor"
                                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                        </svg>
                        <input type="text" id="searchInput"
                            placeholder="Search..."
                            aria-label="Search people" />
                        <button id="clearSearchBtn"
                            class="btn-icon btn-clear hidden"
                            title="Clear search" aria-label="Clear search">
                            <svg viewBox="0 0 24 24" width="14"
                                height="14"><path fill="currentColor"
                                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></svg>
                        </button>
                    </div>

                    <!-- Filters Button -->
                    <button id="filterBtn" class="btn-icon" title="Filters"
                        aria-label="Toggle filters">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path
                                fill="currentColor"
                                d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z" /></svg>
                    </button>

                    <!-- Filter Panel (Hidden by default) -->
                    <div id="filterPanel" class="filter-panel hidden">
                        <div class="filter-group">
                            <label>Country:</label>
                            <select id="countryFilter"
                                aria-label="Filter by country">
                                <option value="All">All</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>City:</label>
                            <select id="cityFilter" aria-label="Filter by city">
                                <option value="All">All</option>
                            </select>
                        </div>
                        <button id="clearFiltersBtn"
                            class="btn-sm btn-secondary hidden">
                            Clear Filters
                        </button>
                    </div>
                </div>

                <!-- Primary Action + More Menu -->
                <div class="navbar-right">
                    <button id="addPersonBtn" class="btn btn-primary"
                        aria-label="Add new person">
                        <svg viewBox="0 0 24 24" width="16" height="16"><path
                                fill="currentColor"
                                d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" /></svg>
                        <span class="btn-label">Add Person</span>
                    </button>

                    <!-- More Menu -->
                    <div class="menu-container">
                        <button id="moreMenuBtn" class="btn-icon"
                            title="More options" aria-label="More options"
                            aria-expanded="false">
                            <svg viewBox="0 0 24 24" width="18"
                                height="18"><path fill="currentColor"
                                    d="M12 8c1.1 0 2-0.9 2-2s-0.9-2-2-2-2 0.9-2 2 0.9 2 2 2zm0 2c-1.1 0-2 0.9-2 2s0.9 2 2 2 2-0.9 2-2-0.9-2-2-2zm0 6c-1.1 0-2 0.9-2 2s0.9 2 2 2 2-0.9 2-2-0.9-2-2-2z" /></svg>
                        </button>
                        <div id="moreMenu" class="dropdown-menu hidden">
                            <button id="fitScreenBtn" class="menu-item">
                                <svg viewBox="0 0 24 24" width="16"
                                    height="16"><path fill="currentColor"
                                        d="M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4z" /></svg>
                                Fit to Screen
                            </button>
                            <button id="autoArrangeBtn" class="menu-item">
                                <svg viewBox="0 0 24 24" width="16"
                                    height="16"><path fill="currentColor"
                                        d="M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z" /></svg>
                                Auto Arrange
                            </button>
                            <button id="exportBtn" class="menu-item">
                                <svg viewBox="0 0 24 24" width="16"
                                    height="16"><path fill="currentColor"
                                        d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z" /></svg>
                                Export
                            </button>
                            <button id="importBtn" class="menu-item">
                                <svg viewBox="0 0 24 24" width="16"
                                    height="16"><path fill="currentColor"
                                        d="M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z" /></svg>
                                Import
                            </button>
                            <button id="printBtn" class="menu-item">
                                <svg viewBox="0 0 24 24" width="16"
                                    height="16"><path fill="currentColor"
                                        d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z" /></svg>
                                Print
                            </button>
                            <button id="settingsBtn" class="menu-item">
                                <svg viewBox="0 0 24 24" width="16"
                                    height="16"><path fill="currentColor"
                                        d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" /></svg>
                                Settings
                            </button>
                            <hr class="menu-divider">
                            <button id="resetBtn" class="menu-item menu-danger">
                                <svg viewBox="0 0 24 24" width="16"
                                    height="16"><path fill="currentColor"
                                        d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" /></svg>
                                Reset All Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content" role="main">
            <!-- Canvas/Tree Area -->
            <div class="canvas-wrapper">
                <div id="canvasGrid" class="canvas-grid"></div>
                <svg id="treeSvg" width="100%" height="100%" role="img"
                    aria-label="Family tree visualization">
                    <defs>
                        <filter id="nodeShadow" x="-50%" y="-50%" width="200%"
                            height="200%">
                            <fedropshadow dx="0" dy="2" stdDeviation="3"
                                flood-opacity="0.1" />
                        </filter>
                        <filter id="nodeSelectedShadow" x="-50%" y="-50%"
                            width="200%" height="200%">
                            <fedropshadow dx="0" dy="4" stdDeviation="8"
                                flood-color="#2c5f2d" flood-opacity="0.3" />
                        </filter>
                    </defs>
                </svg>

                <!-- Empty State Overlay -->
                <div id="emptyState" class="empty-state hidden">
                    <div class="empty-state-content">
                        <svg class="empty-icon" viewBox="0 0 24 24" width="64"
                            height="64"><path fill="currentColor"
                                d="M12 2C8.13 2 5 5.13 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7zm-2 15v-1h4v1h-4zm4-3h-4v-1.5h4V14z" /></svg>
                        <h2>Start Your Family Tree</h2>
                        <p>Click "+ Add Person" to begin documenting your family
                            history</p>
                        <div class="empty-tips">
                            <p><kbd>Scroll</kbd> to zoom • <kbd>Drag</kbd> to
                                pan • <kbd>Click</kbd> nodes for details</p>
                        </div>
                    </div>
                </div>

                <!-- Zoom Controls -->
                <div class="zoom-controls">
                    <button id="zoomInBtn" class="btn-icon"
                        title="Zoom in (Scroll)" aria-label="Zoom in">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path
                                fill="currentColor"
                                d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" /></svg>
                    </button>
                    <span id="zoomLevel" class="zoom-level">100%</span>
                    <button id="zoomOutBtn" class="btn-icon"
                        title="Zoom out (Scroll)" aria-label="Zoom out">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path
                                fill="currentColor"
                                d="M19 13H5v-2h14v2z" /></svg>
                    </button>
                </div>
            </div>

            <!-- Right Drawer (Person Details) -->
            <aside id="drawer" class="drawer" role="complementary"
                aria-label="Person details">
                <div class="drawer-header">
                    <h2 id="drawerTitle">Person Details</h2>
                    <button id="closeDrawerBtn" class="btn-icon"
                        aria-label="Close panel">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path
                                fill="currentColor"
                                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></svg>
                    </button>
                </div>
                <div class="drawer-content" id="drawerContent">
                    <p class="drawer-placeholder">Select a person to view
                        details</p>
                </div>
            </aside>
        </main>

        <!-- Hidden File Inputs for Import/Open -->
        <input type="file" id="importFile" accept=".json" style="display: none;"
            aria-hidden="true">
        <input type="file" id="openProjectFile" accept=".json,.familytree.json"
            style="display: none;"
            aria-hidden="true">

        <!-- Modals -->

        <!-- Add/Edit Person Modal -->
        <div id="personModal" class="modal hidden" role="dialog"
            aria-modal="true" aria-labelledby="personModalTitle">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="personModalTitle">Add Person</h2>
                    <button class="btn-icon" id="closePersonModalBtn"
                        aria-label="Close modal">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path
                                fill="currentColor"
                                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></svg>
                    </button>
                </div>
                <form id="personForm" class="modal-body">
                    <input type="hidden" id="personId">
                    <input type="hidden" id="personRelationContext">

                    <!-- Basic Info -->
                    <div class="form-section">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="personName">Name *</label>
                                <input type="text" id="personName" required
                                    autocomplete="off" placeholder="Full name">
                            </div>
                            <div class="form-group">
                                <label for="personGender">Gender</label>
                                <select id="personGender">
                                    <option value>—</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="personBirthYear">Birth Year</label>
                                <input type="number" id="personBirthYear"
                                    min="1" max="2100" placeholder="YYYY">
                            </div>
                            <div class="form-group">
                                <label for="personDeathYear">Death Year</label>
                                <input type="number" id="personDeathYear"
                                    min="1" max="2100" placeholder="YYYY">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="personOriginCountry">Origin
                                Country</label>
                            <input type="text" id="personOriginCountry"
                                list="countrySuggestions"
                                placeholder="e.g., Bahrain">
                            <datalist id="countrySuggestions"></datalist>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="personOriginCity">City</label>
                                <input type="text" id="personOriginCity"
                                    list="citySuggestions"
                                    placeholder="e.g., Manama">
                                <datalist id="citySuggestions"></datalist>
                            </div>
                            <div class="form-group">
                                <label for="personTag">Family Tag</label>
                                <input type="text" id="personTag"
                                    placeholder="e.g., Al-Khalifa">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="personNotes">Notes</label>
                            <textarea id="personNotes" rows="2"
                                placeholder="Additional information..."></textarea>
                        </div>
                    </div>

                    <!-- More Details (Accordion) -->
                    <details class="form-accordion">
                        <summary>More Details</summary>
                        <div class="accordion-content">
                            <div class="form-group">
                                <label for="personOriginArea">Area /
                                    Neighborhood</label>
                                <input type="text" id="personOriginArea"
                                    placeholder="Village, neighborhood...">
                            </div>
                            <div class="form-group">
                                <label for="personOriginFamilyBranch">Family
                                    Branch</label>
                                <input type="text" id="personOriginFamilyBranch"
                                    placeholder="Branch, tribe...">
                            </div>
                            <div class="form-group">
                                <label for="personOriginNotes">Origin
                                    Notes</label>
                                <textarea id="personOriginNotes" rows="2"
                                    placeholder="Additional origin details..."></textarea>
                            </div>
                        </div>
                    </details>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            id="cancelPersonBtn">Cancel</button>
                        <button type="submit"
                            class="btn btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Relationship Modal (Add Parent/Child/Spouse) -->
        <div id="relationshipModal" class="modal hidden" role="dialog"
            aria-modal="true" aria-labelledby="relationshipModalTitle">
            <div class="modal-overlay"></div>
            <div class="modal-content modal-medium">
                <div class="modal-header">
                    <h2 id="relationshipModalTitle">Add Relationship</h2>
                    <button class="btn-icon" id="closeRelationshipModalBtn"
                        aria-label="Close modal">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path
                                fill="currentColor"
                                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></svg>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Tab Buttons -->
                    <div class="tab-buttons">
                        <button class="tab-btn active"
                            data-tab="create-tab">Create New</button>
                        <button class="tab-btn" data-tab="link-tab">Link
                            Existing</button>
                    </div>

                    <!-- Create New Person Tab -->
                    <div id="create-tab" class="tab-content active">
                        <form id="relationshipCreateForm">
                            <div class="form-group">
                                <label for="relNewName">Name *</label>
                                <input type="text" id="relNewName" required
                                    placeholder="Full name">
                            </div>
                            <div class="form-group">
                                <label for="relNewGender">Gender</label>
                                <select id="relNewGender">
                                    <option value>—</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>
                            <button type="submit"
                                class="btn btn-primary btn-full">Create &
                                Link</button>
                        </form>
                    </div>

                    <!-- Link Existing Person Tab -->
                    <div id="link-tab" class="tab-content">
                        <form id="relationshipLinkForm">
                            <div class="search-box search-box-sm">
                                <svg class="search-icon" viewBox="0 0 24 24"
                                    width="16" height="16" aria-hidden="true">
                                    <path fill="currentColor"
                                        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                                </svg>
                                <input type="text" id="relLinkSearch"
                                    placeholder="Search by name..."
                                    autocomplete="off">
                            </div>
                            <div id="relLinkListbox" class="link-listbox"
                                role="listbox" tabindex="0"
                                aria-label="Select person to link">
                                <div class="link-listbox-empty">No matching
                                    people</div>
                            </div>
                            <input type="hidden" id="relLinkSelectedId" value>
                            <div id="relLinkPreview"
                                class="link-preview hidden">
                                <span class="link-preview-label">Linking:</span>
                                <span id="relLinkPreviewText"></span>
                            </div>
                            <button type="submit" id="relLinkSubmitBtn"
                                class="btn btn-primary btn-full" disabled>Link
                                Person</button>
                        </form>
                    </div>

                    <div id="relationshipError"
                        class="error-message hidden"></div>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal hidden" role="dialog"
            aria-modal="true" aria-labelledby="settingsModalTitle">
            <div class="modal-overlay"></div>
            <div class="modal-content modal-small">
                <div class="modal-header">
                    <h2 id="settingsModalTitle">Settings</h2>
                    <button class="btn-icon" id="closeSettingsModalBtn"
                        aria-label="Close modal">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path
                                fill="currentColor"
                                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h3>Display</h3>
                        <label class="toggle-label">
                            <input type="checkbox" id="hideOriginBadgesToggle">
                            <span class="toggle-switch"></span>
                            Hide origin badges
                        </label>
                        <label class="toggle-label">
                            <input type="checkbox" id="showCanvasGridToggle">
                            <span class="toggle-switch"></span>
                            Show grid
                        </label>
                    </div>

                    <div class="settings-section">
                        <h3>Accessibility</h3>
                        <label class="toggle-label">
                            <input type="checkbox" id="reduceMotionToggle">
                            <span class="toggle-switch"></span>
                            Reduce motion
                        </label>
                    </div>

                    <div class="settings-section">
                        <h3>Layout</h3>
                        <label class="toggle-label">
                            <input type="checkbox"
                                id="lockManualPositionsToggle">
                            <span class="toggle-switch"></span>
                            Lock manually moved nodes
                        </label>
                        <p class="settings-hint">When enabled, Auto Arrange will
                            only affect nodes that haven't been manually
                            repositioned.</p>
                    </div>

                    <div class="settings-section">
                        <h3>Data</h3>
                        <button id="loadDemoBtn"
                            class="btn btn-secondary btn-full">Load Demo
                            Family</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirm Dialog Modal -->
        <div id="confirmModal" class="modal hidden" role="alertdialog"
            aria-modal="true" aria-labelledby="confirmTitle">
            <div class="modal-overlay"></div>
            <div class="modal-content modal-small">
                <div class="modal-header">
                    <h2 id="confirmTitle">Confirm</h2>
                </div>
                <div class="modal-body">
                    <p id="confirmMessage"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                        id="confirmCancelBtn">Cancel</button>
                    <button type="button" class="btn btn-danger"
                        id="confirmOkBtn">Confirm</button>
                </div>
            </div>
        </div>

        <script src="app.js"></script>
    </body>
</html>
